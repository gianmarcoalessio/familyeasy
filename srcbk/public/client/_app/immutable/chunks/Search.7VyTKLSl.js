import{s as H,e as p,c as m,b as g,m as Y,f as d,r as U,o as k,i as I,h,B,p as J,n as P,u as K,w as Q,z as Z,t as E,d as C,j as D,l as $,a as S,g as O,q as x}from"./scheduler.335M-m3f.js";import{e as T}from"./each.6w4Ej4nR.js";import{S as R,i as W,b as ee,c as te,a as le,m as ae,t as ne,d as se,e as ie}from"./index.K2G5X1vL.js";import{i as oe,j as re}from"./servizi.OTsL07Dt.js";import{I as ce}from"./Input.BkZDYS4g.js";function L(o,e,t){const n=o.slice();return n[4]=e[t],n}function M(o){let e,t=o[4].name+"",n,r,c;return{c(){e=p("option"),n=E(t),this.h()},l(l){e=m(l,"OPTION",{});var u=g(e);n=C(u,t),u.forEach(d),this.h()},h(){e.selected=r=o[4]._id==o[0]._id,e.__value=c=o[4]._id,U(e,e.__value)},m(l,u){I(l,e,u),h(e,n)},p(l,u){u&2&&t!==(t=l[4].name+"")&&D(n,t),u&3&&r!==(r=l[4]._id==l[0]._id)&&(e.selected=r),u&2&&c!==(c=l[4]._id)&&(e.__value=c,U(e,e.__value))},d(l){l&&d(e)}}}function ue(o){let e,t,n="Seleziona categoria",r,c,l,u=T(o[1]),s=[];for(let a=0;a<u.length;a+=1)s[a]=M(L(o,u,a));return{c(){e=p("select"),t=p("option"),t.textContent=n;for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=m(a,"SELECT",{class:!0});var f=g(e);t=m(f,"OPTION",{"data-svelte-h":!0}),Y(t)!=="svelte-1si2e75"&&(t.textContent=n);for(let i=0;i<s.length;i+=1)s[i].l(f);f.forEach(d),this.h()},h(){t.disabled=!0,t.__value="",U(t,t.__value),k(e,"class","select select-bordered")},m(a,f){I(a,e,f),h(e,t);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);B(e,o[0]._id),c||(l=J(e,"change",o[2]),c=!0)},p(a,[f]){if(f&3){u=T(a[1]);let i;for(i=0;i<u.length;i+=1){const v=L(a,u,i);s[i]?s[i].p(v,f):(s[i]=M(v),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=u.length}f&3&&r!==(r=a[0]._id)&&B(e,a[0]._id)},i:P,o:P,d(a){a&&d(e),K(s,a),c=!1,l()}}}function fe(o,e,t){const n=Q();function r(u){t(0,l=c.find(s=>s._id===u.target.value)),n("change",l)}let c=[],{categoria:l={}}=e;return Z(async()=>{t(1,c=await oe()),l._id||t(0,l=c[0])}),o.$$set=u=>{"categoria"in u&&t(0,l=u.categoria)},[l,c,r]}class be extends R{constructor(e){super(),W(this,e,fe,ue,H,{categoria:0})}}function A(o,e,t){const n=o.slice();return n[8]=e[t],n}function F(o){let e,t=T(o[1]),n=[];for(let r=0;r<t.length;r+=1)n[r]=G(A(o,t,r));return{c(){e=p("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=m(r,"DIV",{class:!0});var c=g(e);for(let l=0;l<n.length;l+=1)n[l].l(c);c.forEach(d),this.h()},h(){k(e,"class","flex flex-col space-y-1 absolute top-26 left-0 z-10 bg-primary px-2 py-2 rounded-xl w-full ")},m(r,c){I(r,e,c);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null)},p(r,c){if(c&18){t=T(r[1]);let l;for(l=0;l<t.length;l+=1){const u=A(r,t,l);n[l]?n[l].p(u,c):(n[l]=G(u),n[l].c(),n[l].m(e,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(r){r&&d(e),K(n,r)}}}function G(o){let e,t,n,r=o[8].username+"",c,l,u,s=o[8].firstname+"",a,f,i,v=o[8].lastname+"",w,V,z,j;function X(){return o[6](o[8])}return{c(){e=p("button"),t=p("div"),n=E("@"),c=E(r),l=S(),u=p("div"),a=E(s),f=S(),i=p("div"),w=E(v),V=S(),this.h()},l(b){e=m(b,"BUTTON",{class:!0});var _=g(e);t=m(_,"DIV",{class:!0});var N=g(t);n=C(N,"@"),c=C(N,r),N.forEach(d),l=O(_),u=m(_,"DIV",{class:!0});var q=g(u);a=C(q,s),q.forEach(d),f=O(_),i=m(_,"DIV",{class:!0});var y=g(i);w=C(y,v),y.forEach(d),V=O(_),_.forEach(d),this.h()},h(){k(t,"class","flex-1"),k(u,"class",""),k(i,"class",""),k(e,"class","btn flex flex-row space-x-2 items-center")},m(b,_){I(b,e,_),h(e,t),h(t,n),h(t,c),h(e,l),h(e,u),h(u,a),h(e,f),h(e,i),h(i,w),h(e,V),z||(j=J(e,"click",X),z=!0)},p(b,_){o=b,_&2&&r!==(r=o[8].username+"")&&D(c,r),_&2&&s!==(s=o[8].firstname+"")&&D(a,s),_&2&&v!==(v=o[8].lastname+"")&&D(w,v)},d(b){b&&d(e),z=!1,j()}}}function _e(o){let e,t,n,r,c;function l(a){o[5](a)}let u={topleftlabel:o[0],placeholder:"Cerca per nome, cognome e username",inputclass:" input-primary"};o[2]!==void 0&&(u.value=o[2]),t=new ce({props:u}),$.push(()=>ee(t,"value",l)),t.$on("change",o[3]);let s=o[1].length>0&&o[2]!==""&&F(o);return{c(){e=p("div"),te(t.$$.fragment),r=S(),s&&s.c(),this.h()},l(a){e=m(a,"DIV",{class:!0});var f=g(e);le(t.$$.fragment,f),r=O(f),s&&s.l(f),f.forEach(d),this.h()},h(){k(e,"class","relative w-full")},m(a,f){I(a,e,f),ae(t,e,null),h(e,r),s&&s.m(e,null),c=!0},p(a,[f]){const i={};f&1&&(i.topleftlabel=a[0]),!n&&f&4&&(n=!0,i.value=a[2],x(()=>n=!1)),t.$set(i),a[1].length>0&&a[2]!==""?s?s.p(a,f):(s=F(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(a){c||(ne(t.$$.fragment,a),c=!0)},o(a){se(t.$$.fragment,a),c=!1},d(a){a&&d(e),ie(t),s&&s.d()}}}function he(o,e,t){let n=[],{topleftlabel:r=""}=e,c="";const l=Q();async function u(i){c.trim()!==""&&t(1,n=await re(c))}function s(i){l("add",i),t(2,c=""),t(1,n=[])}function a(i){c=i,t(2,c)}const f=i=>{s(i)};return o.$$set=i=>{"topleftlabel"in i&&t(0,r=i.topleftlabel)},[r,n,c,u,s,a,f]}class ke extends R{constructor(e){super(),W(this,e,he,_e,H,{topleftlabel:0})}}export{be as C,ke as S};
