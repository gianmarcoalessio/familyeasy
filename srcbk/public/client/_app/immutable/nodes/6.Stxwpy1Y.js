import{s as Z,l as we,a as y,e as E,t as z,g as C,c as w,b as I,m as K,d as U,f as g,o as $,i as N,h as p,p as Y,q as De,j as M,v as Ce,w as Ve,z as Te,u as X,n as Ie,L as Se}from"../chunks/scheduler.335M-m3f.js";import{S as x,i as ee,b as qe,c as G,a as R,m as j,t as A,d as O,e as J,g as oe,f as ie}from"../chunks/index.K2G5X1vL.js";import{e as F}from"../chunks/each.6w4Ej4nR.js";import{k as Le}from"../chunks/servizi.Tbb05M6l.js";import{A as Ne}from"../chunks/Aggiungispesa.i2JX8iwu.js";import{S as ze}from"../chunks/Spesa.BDEPuJAx.js";import{I as Ue,f as ce}from"../chunks/Input.BkZDYS4g.js";import{N as Ae}from"../chunks/Navigator.LGbT-rmj.js";function ue(r,e,l){const t=r.slice();return t[18]=e[l],t}function fe(r,e,l){const t=r.slice();return t[21]=e[l],t}function de(r){let e,l=F(r[3]),t=[];for(let s=0;s<l.length;s+=1)t[s]=he(fe(r,l,s));return{c(){e=E("ul");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=w(s,"UL",{tabindex:!0,class:!0});var f=I(e);for(let n=0;n<t.length;n+=1)t[n].l(f);f.forEach(g),this.h()},h(){$(e,"tabindex","0"),$(e,"class","dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-full")},m(s,f){N(s,e,f);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(s,f){if(f&1032){l=F(s[3]);let n;for(n=0;n<l.length;n+=1){const h=fe(s,l,n);t[n]?t[n].p(h,f):(t[n]=he(h),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=l.length}},d(s){s&&g(e),X(t,s)}}}function he(r){let e,l,t=r[21].name+"",s,f,n,h;function o(){return r[14](r[21])}return{c(){e=E("li"),l=E("button"),s=z(t),f=y(),this.h()},l(u){e=w(u,"LI",{});var a=I(e);l=w(a,"BUTTON",{class:!0});var d=I(l);s=U(d,t),d.forEach(g),f=C(a),a.forEach(g),this.h()},h(){$(l,"class","w-full text-left")},m(u,a){N(u,e,a),p(e,l),p(l,s),p(e,f),n||(h=Y(l,"click",o),n=!0)},p(u,a){r=u,a&8&&t!==(t=r[21].name+"")&&M(s,t)},d(u){u&&g(e),n=!1,h()}}}function _e(r){let e,l,t=(r[0]?r[0].name:"Seleziona un mese")+"",s,f,n,h,o=r[4]&&me(r);return{c(){e=E("div"),l=E("div"),s=z(t),f=y(),o&&o.c(),this.h()},l(u){e=w(u,"DIV",{class:!0});var a=I(e);l=w(a,"DIV",{tabindex:!0,role:!0,class:!0});var d=I(l);s=U(d,t),d.forEach(g),f=C(a),o&&o.l(a),a.forEach(g),this.h()},h(){$(l,"tabindex","0"),$(l,"role","button"),$(l,"class","btn w-40"),$(e,"class","dropdown")},m(u,a){N(u,e,a),p(e,l),p(l,s),p(e,f),o&&o.m(e,null),n||(h=Y(e,"click",r[17]),n=!0)},p(u,a){a&1&&t!==(t=(u[0]?u[0].name:"Seleziona un mese")+"")&&M(s,t),u[4]?o?o.p(u,a):(o=me(u),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(u){u&&g(e),o&&o.d(),n=!1,h()}}}function me(r){let e,l=F(r[2]),t=[];for(let s=0;s<l.length;s+=1)t[s]=pe(ue(r,l,s));return{c(){e=E("ul");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=w(s,"UL",{tabindex:!0,class:!0});var f=I(e);for(let n=0;n<t.length;n+=1)t[n].l(f);f.forEach(g),this.h()},h(){$(e,"tabindex","0"),$(e,"class","dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-full")},m(s,f){N(s,e,f);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(s,f){if(f&516){l=F(s[2]);let n;for(n=0;n<l.length;n+=1){const h=ue(s,l,n);t[n]?t[n].p(h,f):(t[n]=pe(h),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=l.length}},d(s){s&&g(e),X(t,s)}}}function pe(r){let e,l,t=r[18].name+"",s,f,n,h;function o(){return r[16](r[18])}return{c(){e=E("li"),l=E("button"),s=z(t),f=y(),this.h()},l(u){e=w(u,"LI",{});var a=I(e);l=w(a,"BUTTON",{class:!0});var d=I(l);s=U(d,t),d.forEach(g),f=C(a),a.forEach(g),this.h()},h(){$(l,"class","w-full text-left")},m(u,a){N(u,e,a),p(e,l),p(l,s),p(e,f),n||(h=Y(l,"click",o),n=!0)},p(u,a){r=u,a&4&&t!==(t=r[18].name+"")&&M(s,t)},d(u){u&&g(e),n=!1,h()}}}function Me(r){let e,l,t,s,f,n="Tutte",h,o,u,a=(r[1]?r[1].name:"Seleziona un anno")+"",d,v,m,q,V,k;function D(c){r[11](c)}let T={placeholder:"Cerca la spesa",inputclass:"my-4 mx-2"};r[6].q!==void 0&&(T.value=r[6].q),e=new Ue({props:T}),we.push(()=>qe(e,"value",D)),e.$on("change",r[12]);let _=r[5]&&de(r),i=r[6].year&&_e(r);return{c(){G(e.$$.fragment),t=y(),s=E("div"),f=E("button"),f.textContent=n,h=y(),o=E("div"),u=E("div"),d=z(a),v=y(),_&&_.c(),m=y(),i&&i.c(),this.h()},l(c){R(e.$$.fragment,c),t=C(c),s=w(c,"DIV",{class:!0});var b=I(s);f=w(b,"BUTTON",{class:!0,"data-svelte-h":!0}),K(f)!=="svelte-1ytx9so"&&(f.textContent=n),h=C(b),o=w(b,"DIV",{class:!0});var S=I(o);u=w(S,"DIV",{tabindex:!0,role:!0,class:!0});var H=I(u);d=U(H,a),H.forEach(g),v=C(S),_&&_.l(S),S.forEach(g),m=C(b),i&&i.l(b),b.forEach(g),this.h()},h(){$(f,"class","btn"),$(u,"tabindex","0"),$(u,"role","button"),$(u,"class","btn w-40"),$(o,"class","dropdown"),$(s,"class","mb-4")},m(c,b){j(e,c,b),N(c,t,b),N(c,s,b),p(s,f),p(s,h),p(s,o),p(o,u),p(u,d),p(o,v),_&&_.m(o,null),p(s,m),i&&i.m(s,null),q=!0,V||(k=[Y(f,"click",r[13]),Y(o,"click",r[15])],V=!0)},p(c,[b]){const S={};!l&&b&64&&(l=!0,S.value=c[6].q,De(()=>l=!1)),e.$set(S),(!q||b&2)&&a!==(a=(c[1]?c[1].name:"Seleziona un anno")+"")&&M(d,a),c[5]?_?_.p(c,b):(_=de(c),_.c(),_.m(o,null)):_&&(_.d(1),_=null),c[6].year?i?i.p(c,b):(i=_e(c),i.c(),i.m(s,null)):i&&(i.d(1),i=null)},i(c){q||(A(e.$$.fragment,c),q=!0)},o(c){O(e.$$.fragment,c),q=!1},d(c){c&&(g(t),g(s)),J(e,c),_&&_.d(),i&&i.d(),V=!1,Ce(k)}}}function Be(r,e,l){let t=Ve(),s=null,f=null,n=[],h=[],o=!1,u=!1,a={year:null,month:null};Te(()=>{l(2,n=[{id:1,name:"Gennaio"},{id:2,name:"Febbraio"},{id:3,name:"Marzo"},{id:4,name:"Aprile"},{id:5,name:"Maggio"},{id:6,name:"Giugno"},{id:7,name:"Luglio"},{id:8,name:"Agosto"},{id:9,name:"Settembre"},{id:10,name:"Ottobre"},{id:11,name:"Novembre"},{id:12,name:"Dicembre"}]);const c=new Date().getFullYear();l(3,h=Array.from({length:10},(b,S)=>({id:c-S,name:`${c-S}`})))});function d(c){l(1,f=null),l(0,s=null),l(6,a={year:null,month:null,q:""}),t("filtra",a)}function v(c){l(0,s=c),l(6,a.month=c.id,a),t("filtra",a)}function m(c){l(1,f=c),l(6,a.year=c.id,a),t("filtra",a)}function q(c){r.$$.not_equal(a.q,c)&&(a.q=c,l(6,a))}return[s,f,n,h,o,u,a,t,d,v,m,q,()=>{t("filtra",a)},()=>d(),c=>m(c),()=>{l(5,u=!u)},c=>v(c),()=>{l(4,o=!o)}]}class Oe extends x{constructor(e){super(),ee(this,e,Be,Me,Z,{})}}function ge(r,e,l){const t=r.slice();return t[15]=e[l],t}function be(r,e,l){const t=r.slice();return t[18]=e[l],t[19]=e,t[20]=l,t}function ve(r){let e,l,t;function s(n){r[6](n)}let f={open:!0};return r[4]!==void 0&&(f.expense=r[4]),e=new ze({props:f}),we.push(()=>qe(e,"expense",s)),e.$on("close",r[7]),e.$on("reload",r[8]),{c(){G(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,h){j(e,n,h),t=!0},p(n,h){const o={};!l&&h&16&&(l=!0,o.expense=n[4],De(()=>l=!1)),e.$set(o)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function ke(r){let e,l;return e=new Ne({props:{open:!0}}),e.$on("close",r[9]),e.$on("reload",r[10]),{c(){G(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){j(e,t,s),l=!0},p:Ie,i(t){l||(A(e.$$.fragment,t),l=!0)},o(t){O(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Pe(r){let e=Q(r[15].quote)+"",l;return{c(){l=z(e)},l(t){l=U(t,e)},m(t,s){N(t,l,s)},p(t,s){s&2&&e!==(e=Q(t[15].quote)+"")&&M(l,e)},d(t){t&&g(l)}}}function Ye(r){let e,l,t=Q(r[15].quote)+"",s,f,n,h,o,u=F(r[15].quote),a=[];for(let d=0;d<u.length;d+=1)a[d]=$e(be(r,u,d));return{c(){e=E("div"),l=E("div"),s=z(t),f=y(),n=E("ul");for(let d=0;d<a.length;d+=1)a[d].c();this.h()},l(d){e=w(d,"DIV",{class:!0});var v=I(e);l=w(v,"DIV",{tabindex:!0,role:!0,class:!0});var m=I(l);s=U(m,t),m.forEach(g),f=C(v),n=w(v,"UL",{tabindex:!0,class:!0});var q=I(n);for(let V=0;V<a.length;V+=1)a[V].l(q);q.forEach(g),v.forEach(g),this.h()},h(){$(l,"tabindex","0"),$(l,"role","button"),$(l,"class","btn btn-primary m-1"),$(n,"tabindex","0"),$(n,"class","dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52"),$(e,"class","dropdown")},m(d,v){N(d,e,v),p(e,l),p(l,s),p(e,f),p(e,n);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(n,null);h||(o=Y(l,"click",Se(He)),h=!0)},p(d,v){if(v&2&&t!==(t=Q(d[15].quote)+"")&&M(s,t),v&2){u=F(d[15].quote);let m;for(m=0;m<u.length;m+=1){const q=be(d,u,m);a[m]?a[m].p(q,v):(a[m]=$e(q),a[m].c(),a[m].m(n,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=u.length}},d(d){d&&g(e),X(a,d),h=!1,o()}}}function $e(r){let e,l,t,s,f=r[18].user.username+"",n,h,o,u=W(r[18].cost)+"",a,d,v,m,q,V,k;function D(){r[13].call(m,r[19],r[20])}return{c(){e=E("li"),l=E("div"),t=E("div"),s=z("@"),n=z(f),h=y(),o=E("div"),a=z(u),v=y(),m=E("input"),q=y(),this.h()},l(T){e=w(T,"LI",{});var _=I(e);l=w(_,"DIV",{class:!0});var i=I(l);t=w(i,"DIV",{class:!0});var c=I(t);s=U(c,"@"),n=U(c,f),c.forEach(g),h=C(i),o=w(i,"DIV",{class:!0});var b=I(o);a=U(b,u),b.forEach(g),v=C(i),m=w(i,"INPUT",{type:!0,class:!0}),q=C(i),i.forEach(g),_.forEach(g),this.h()},h(){$(t,"class","flex-1"),$(o,"class",d="w-12 "+(r[18].rimborso?"text-success":"text-error")),$(m,"type","checkbox"),m.disabled=!0,$(m,"class","toggle"),$(l,"class","flex flex-row space-x-2 items-center")},m(T,_){N(T,e,_),p(e,l),p(l,t),p(t,s),p(t,n),p(l,h),p(l,o),p(o,a),p(l,v),p(l,m),m.checked=r[18].rimborso,p(l,q),V||(k=Y(m,"change",D),V=!0)},p(T,_){r=T,_&2&&f!==(f=r[18].user.username+"")&&M(n,f),_&2&&u!==(u=W(r[18].cost)+"")&&M(a,u),_&2&&d!==(d="w-12 "+(r[18].rimborso?"text-success":"text-error"))&&$(o,"class",d),_&2&&(m.checked=r[18].rimborso)},d(T){T&&g(e),V=!1,k()}}}function Ee(r){let e,l,t=ce(r[15].date)+"",s,f,n,h=W(r[15].totalcost)+"",o,u,a,d,v,m=r[15].description+"",q,V,k,D,T=r[15].category.name+"",_,i,c,b;function S(P,L){return P[15].quote.length>1?Ye:Pe}let H=S(r),B=H(r);function ye(){return r[14](r[15])}return{c(){e=E("tr"),l=E("td"),s=z(t),f=y(),n=E("td"),o=z(h),u=y(),a=E("td"),B.c(),d=y(),v=E("td"),q=z(m),V=y(),k=E("td"),D=E("div"),_=z(T),i=y(),this.h()},l(P){e=w(P,"TR",{class:!0});var L=I(e);l=w(L,"TD",{});var te=I(l);s=U(te,t),te.forEach(g),f=C(L),n=w(L,"TD",{});var le=I(n);o=U(le,h),le.forEach(g),u=C(L),a=w(L,"TD",{});var ne=I(a);B.l(ne),ne.forEach(g),d=C(L),v=w(L,"TD",{});var re=I(v);q=U(re,m),re.forEach(g),V=C(L),k=w(L,"TD",{});var se=I(k);D=w(se,"DIV",{class:!0});var ae=I(D);_=U(ae,T),ae.forEach(g),se.forEach(g),i=C(L),L.forEach(g),this.h()},h(){$(D,"class","badge badge-secondary"),$(e,"class","hover:bg-neutral-content cursor-pointer")},m(P,L){N(P,e,L),p(e,l),p(l,s),p(e,f),p(e,n),p(n,o),p(e,u),p(e,a),B.m(a,null),p(e,d),p(e,v),p(v,q),p(e,V),p(e,k),p(k,D),p(D,_),p(e,i),c||(b=Y(e,"click",ye),c=!0)},p(P,L){r=P,L&2&&t!==(t=ce(r[15].date)+"")&&M(s,t),L&2&&h!==(h=W(r[15].totalcost)+"")&&M(o,h),H===(H=S(r))&&B?B.p(r,L):(B.d(1),B=H(r),B&&(B.c(),B.m(a,null))),L&2&&m!==(m=r[15].description+"")&&M(q,m),L&2&&T!==(T=r[15].category.name+"")&&M(_,T)},d(P){P&&g(e),B.d(),c=!1,b()}}}function Fe(r){let e,l,t,s="Aggiungi Spesa",f,n,h,o,u,a="<tr><th>Data</th> <th>Totale</th> <th>Partecipanti</th> <th>Descrizione</th> <th>Categoria</th></tr>",d,v,m,q,V,k=r[2]&&ve(r),D=r[3]&&ke(r);n=new Oe({}),n.$on("filtra",r[12]);let T=F(r[1]),_=[];for(let i=0;i<T.length;i+=1)_[i]=Ee(ge(r,T,i));return{c(){k&&k.c(),e=y(),D&&D.c(),l=y(),t=E("button"),t.textContent=s,f=y(),G(n.$$.fragment),h=y(),o=E("table"),u=E("thead"),u.innerHTML=a,d=y(),v=E("tbody");for(let i=0;i<_.length;i+=1)_[i].c();this.h()},l(i){k&&k.l(i),e=C(i),D&&D.l(i),l=C(i),t=w(i,"BUTTON",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-11ed6hy"&&(t.textContent=s),f=C(i),R(n.$$.fragment,i),h=C(i),o=w(i,"TABLE",{class:!0});var c=I(o);u=w(c,"THEAD",{"data-svelte-h":!0}),K(u)!=="svelte-tqqxf3"&&(u.innerHTML=a),d=C(c),v=w(c,"TBODY",{});var b=I(v);for(let S=0;S<_.length;S+=1)_[S].l(b);b.forEach(g),c.forEach(g),this.h()},h(){$(t,"class","btn btn-primary"),$(o,"class","table table-zebra w-full")},m(i,c){k&&k.m(i,c),N(i,e,c),D&&D.m(i,c),N(i,l,c),N(i,t,c),N(i,f,c),j(n,i,c),N(i,h,c),N(i,o,c),p(o,u),p(o,d),p(o,v);for(let b=0;b<_.length;b+=1)_[b]&&_[b].m(v,null);m=!0,q||(V=Y(t,"click",r[11]),q=!0)},p(i,[c]){if(i[2]?k?(k.p(i,c),c&4&&A(k,1)):(k=ve(i),k.c(),A(k,1),k.m(e.parentNode,e)):k&&(oe(),O(k,1,1,()=>{k=null}),ie()),i[3]?D?(D.p(i,c),c&8&&A(D,1)):(D=ke(i),D.c(),A(D,1),D.m(l.parentNode,l)):D&&(oe(),O(D,1,1,()=>{D=null}),ie()),c&22){T=F(i[1]);let b;for(b=0;b<T.length;b+=1){const S=ge(i,T,b);_[b]?_[b].p(S,c):(_[b]=Ee(S),_[b].c(),_[b].m(v,null))}for(;b<_.length;b+=1)_[b].d(1);_.length=T.length}},i(i){m||(A(k),A(D),A(n.$$.fragment,i),m=!0)},o(i){O(k),O(D),O(n.$$.fragment,i),m=!1},d(i){i&&(g(e),g(l),g(t),g(f),g(h),g(o)),k&&k.d(i),D&&D.d(i),J(n,i),X(_,i),q=!1,V()}}}function Q(r){return r.length===1?`${r[0].user.firstname} ${r[0].user.lastname}`:r.length===0?"Nessuno":"Partecipanti"}function W(r){return Number(r).toLocaleString("it-IT",{style:"currency",currency:"EUR"})}const He=()=>{};function Ge(r,e,l){let t=[],s=!1,f=!1,n={},h={};Te(async()=>{await o()});async function o(){console.log("reload",h),l(1,t=await Le(h))}function u(T){n=T,l(4,n)}const a=()=>{l(2,s=!1)},d=()=>{l(2,s=!1),o()},v=()=>{l(3,f=!1)},m=()=>{l(3,f=!1),o()},q=()=>{l(3,f=!0)},V=async T=>{l(5,h=T.detail),await o()};function k(T,_){T[_].rimborso=this.checked,l(1,t)}return[o,t,s,f,n,h,u,a,d,v,m,q,V,k,T=>{l(4,n=T),l(2,s=!0)}]}class Re extends x{constructor(e){super(),ee(this,e,Ge,Fe,Z,{reload:0})}get reload(){return this.$$.ctx[0]}}function je(r){let e,l,t,s,f="Spese",n,h,o,u;return l=new Ae({}),o=new Re({}),{c(){e=E("div"),G(l.$$.fragment),t=y(),s=E("div"),s.textContent=f,n=y(),h=E("div"),G(o.$$.fragment),this.h()},l(a){e=w(a,"DIV",{class:!0});var d=I(e);R(l.$$.fragment,d),t=C(d),s=w(d,"DIV",{class:!0,"data-svelte-h":!0}),K(s)!=="svelte-1kqp0vg"&&(s.textContent=f),d.forEach(g),n=C(a),h=w(a,"DIV",{class:!0});var v=I(h);R(o.$$.fragment,v),v.forEach(g),this.h()},h(){$(s,"class","text-6xl font-bold"),$(e,"class","flex flex-col space-y-4 md:mx-24 mx-2 mt-4"),$(h,"class","grid md:gap-0 grid-cols-1 items-center md:mx-24 mx-4 my-4")},m(a,d){N(a,e,d),j(l,e,null),p(e,t),p(e,s),N(a,n,d),N(a,h,d),j(o,h,null),u=!0},p:Ie,i(a){u||(A(l.$$.fragment,a),A(o.$$.fragment,a),u=!0)},o(a){O(l.$$.fragment,a),O(o.$$.fragment,a),u=!1},d(a){a&&(g(e),g(n),g(h)),J(l),J(o)}}}class tt extends x{constructor(e){super(),ee(this,e,null,je,Z,{})}}export{tt as component};
