import{s as $e,a as B,e as v,t as L,g as N,c as b,b as y,m as ie,d as R,f as i,o as E,i as j,h as o,j as P,u as ke,k as De,z as Ve,l as we,q as Ce,p as Ee,A as ue}from"../chunks/scheduler.335M-m3f.js";import{S as ye,i as Te,c as le,a as se,m as ae,t as J,g as xe,d as K,f as Se,e as re,b as Be}from"../chunks/index.K2G5X1vL.js";import{N as Ne}from"../chunks/Navigator.T656yJ6Q.js";import{e as ne}from"../chunks/each.6w4Ej4nR.js";import{S as Ae}from"../chunks/Spesa.-YVkY3_z.js";import{f as me}from"../chunks/Input.BkZDYS4g.js";import{d as Ie,h as je}from"../chunks/servizi.OTsL07Dt.js";import{S as qe}from"../chunks/Search.7VyTKLSl.js";function _e(s,e,l){const t=s.slice();return t[14]=e[l],t}function he(s,e,l){const t=s.slice();return t[17]=e[l],t[19]=l,t}function pe(s){let e,l,t;function a(r){s[7](r)}let d={nosave:!0,open:!0};return s[3]!==void 0&&(d.expense=s[3]),e=new Ae({props:d}),we.push(()=>Be(e,"expense",a)),e.$on("close",s[8]),e.$on("reload",s[9]),{c(){le(e.$$.fragment)},l(r){se(e.$$.fragment,r)},m(r,c){ae(e,r,c),t=!0},p(r,c){const f={};!l&&c&8&&(l=!0,f.expense=r[3],Ce(()=>l=!1)),e.$set(f)},i(r){t||(J(e.$$.fragment,r),t=!0)},o(r){K(e.$$.fragment,r),t=!1},d(r){re(e,r)}}}function ve(s){let e,l,t=s[5].username+"",a,d,r;return{c(){e=v("button"),l=L("Reset ricerca @"),a=L(t),this.h()},l(c){e=b(c,"BUTTON",{class:!0});var f=y(e);l=R(f,"Reset ricerca @"),a=R(f,t),f.forEach(i),this.h()},h(){E(e,"class","btn btn-primary")},m(c,f){j(c,e,f),o(e,l),o(e,a),d||(r=Ee(e,"click",s[11]),d=!0)},p(c,f){f&32&&t!==(t=c[5].username+"")&&P(a,t)},d(c){c&&i(e),d=!1,r()}}}function Le(s){let e=me(s[14].date)+"",l;return{c(){l=L(e)},l(t){l=R(t,e)},m(t,a){j(t,l,a)},p(t,a){a&2&&e!==(e=me(t[14].date)+"")&&P(l,e)},d(t){t&&i(l)}}}function Re(s){let e=s[14].category.name+"",l;return{c(){l=L(e)},l(t){l=R(t,e)},m(t,a){j(t,l,a)},p(t,a){a&2&&e!==(e=t[14].category.name+"")&&P(l,e)},d(t){t&&i(l)}}}function ze(s){let e=s[14].description+"",l;return{c(){l=L(e)},l(t){l=R(t,e)},m(t,a){j(t,l,a)},p(t,a){a&2&&e!==(e=t[14].description+"")&&P(l,e)},d(t){t&&i(l)}}}function be(s){let e,l,t,a,d,r,c,f,$,_=s[17].user.username+"",k,u,V,A,w=(s[17].rimborso==!1?Y(s[17].cost):"")+"",M,C,U,x=(s[17].rimborso==!0?Y(s[17].cost):"")+"",O,z,F,G,T=s[19]==0&&Le(s),S=s[19]==0&&Re(s),H=s[19]==0&&ze(s);function W(){return s[12](s[14])}return{c(){e=v("tr"),l=v("td"),T&&T.c(),t=B(),a=v("td"),S&&S.c(),d=B(),r=v("td"),H&&H.c(),c=B(),f=v("td"),$=L("@"),k=L(_),V=B(),A=v("td"),M=L(w),C=B(),U=v("td"),O=L(x),z=B(),this.h()},l(q){e=b(q,"TR",{class:!0});var m=y(e);l=b(m,"TD",{class:!0});var h=y(l);T&&T.l(h),h.forEach(i),t=N(m),a=b(m,"TD",{});var I=y(a);S&&S.l(I),I.forEach(i),d=N(m),r=b(m,"TD",{class:!0});var Q=y(r);H&&H.l(Q),Q.forEach(i),c=N(m),f=b(m,"TD",{class:!0});var D=y(f);$=R(D,"@"),k=R(D,_),D.forEach(i),V=N(m),A=b(m,"TD",{class:!0});var n=y(A);M=R(n,w),n.forEach(i),C=N(m),U=b(m,"TD",{class:!0});var p=y(U);O=R(p,x),p.forEach(i),z=N(m),m.forEach(i),this.h()},h(){E(l,"class","hidden md:table-cell"),E(r,"class","hidden md:table-cell"),E(f,"class",u=s[17].user.username==s[6].username?"font-bold text-md text-primary":""),E(A,"class","text-error font-bold"),E(U,"class","text-success font-bold"),E(e,"class","hover:bg-neutral-content cursor-pointer")},m(q,m){j(q,e,m),o(e,l),T&&T.m(l,null),o(e,t),o(e,a),S&&S.m(a,null),o(e,d),o(e,r),H&&H.m(r,null),o(e,c),o(e,f),o(f,$),o(f,k),o(e,V),o(e,A),o(A,M),o(e,C),o(e,U),o(U,O),o(e,z),F||(G=Ee(e,"click",W),F=!0)},p(q,m){s=q,s[19]==0&&T.p(s,m),s[19]==0&&S.p(s,m),s[19]==0&&H.p(s,m),m&2&&_!==(_=s[17].user.username+"")&&P(k,_),m&66&&u!==(u=s[17].user.username==s[6].username?"font-bold text-md text-primary":"")&&E(f,"class",u),m&2&&w!==(w=(s[17].rimborso==!1?Y(s[17].cost):"")+"")&&P(M,w),m&2&&x!==(x=(s[17].rimborso==!0?Y(s[17].cost):"")+"")&&P(O,x)},d(q){q&&i(e),T&&T.d(),S&&S.d(),H&&H.d(),F=!1,G()}}}function ge(s){let e,l=ne(s[14].quote),t=[];for(let a=0;a<l.length;a+=1)t[a]=be(he(s,l,a));return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=ue()},l(a){for(let d=0;d<t.length;d+=1)t[d].l(a);e=ue()},m(a,d){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(a,d);j(a,e,d)},p(a,d){if(d&78){l=ne(a[14].quote);let r;for(r=0;r<l.length;r+=1){const c=he(a,l,r);t[r]?t[r].p(c,d):(t[r]=be(c),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(a){a&&i(e),ke(t,a)}}}function He(s){let e,l,t,a,d="Dare",r,c,f=Y(s[4].dare)+"",$,_,k,u,V="Avere",A,w,M=Y(s[4].avere)+"",C,U,x,O,z,F,G,T,S,H='<tr><th class="hidden md:table-cell">Data</th> <th>Categoria</th> <th class="hidden md:table-cell">Descrizione</th> <th>Utente</th> <th>Dare</th> <th>Avere</th></tr>',W,q,m,h=s[2]&&pe(s);z=new qe({props:{topleftlabel:"Cerca per nome, cognome e username"}}),z.$on("add",s[10]);let I=s[5]&&s[5]._id&&ve(s),Q=ne(s[1]),D=[];for(let n=0;n<Q.length;n+=1)D[n]=ge(_e(s,Q,n));return{c(){h&&h.c(),e=B(),l=v("div"),t=v("div"),a=v("div"),a.textContent=d,r=B(),c=v("div"),$=L(f),_=B(),k=v("div"),u=v("div"),u.textContent=V,A=B(),w=v("div"),C=L(M),U=B(),x=v("div"),O=v("div"),le(z.$$.fragment),F=B(),I&&I.c(),G=B(),T=v("table"),S=v("thead"),S.innerHTML=H,W=B(),q=v("tbody");for(let n=0;n<D.length;n+=1)D[n].c();this.h()},l(n){h&&h.l(n),e=N(n),l=b(n,"DIV",{class:!0});var p=y(l);t=b(p,"DIV",{class:!0});var g=y(t);a=b(g,"DIV",{class:!0,"data-svelte-h":!0}),ie(a)!=="svelte-gs36ac"&&(a.textContent=d),r=N(g),c=b(g,"DIV",{class:!0});var X=y(c);$=R(X,f),X.forEach(i),g.forEach(i),_=N(p),k=b(p,"DIV",{class:!0});var Z=y(k);u=b(Z,"DIV",{class:!0,"data-svelte-h":!0}),ie(u)!=="svelte-1fegl1"&&(u.textContent=V),A=N(Z),w=b(Z,"DIV",{class:!0});var ce=y(w);C=R(ce,M),ce.forEach(i),Z.forEach(i),p.forEach(i),U=N(n),x=b(n,"DIV",{class:!0});var ee=y(x);O=b(ee,"DIV",{class:!0});var fe=y(O);se(z.$$.fragment,fe),fe.forEach(i),F=N(ee),I&&I.l(ee),ee.forEach(i),G=N(n),T=b(n,"TABLE",{class:!0});var te=y(T);S=b(te,"THEAD",{"data-svelte-h":!0}),ie(S)!=="svelte-13rrd77"&&(S.innerHTML=H),W=N(te),q=b(te,"TBODY",{});var de=y(q);for(let oe=0;oe<D.length;oe+=1)D[oe].l(de);de.forEach(i),te.forEach(i),this.h()},h(){E(a,"class","text-5xl"),E(c,"class","text-5xl text-error font-bold"),E(t,"class","flex flex-col items-center space-y-4 justify-center"),E(u,"class","text-5xl "),E(w,"class","text-5xl text-success font-bold"),E(k,"class","flex flex-col items-center space-y-4 justify-center"),E(l,"class","flex md:flex-row flex-col space-y-8 md:space-y-0 md:space-x-24 justify-center items-center my-8 "),E(O,"class","flex-1"),E(x,"class","flex felx-row space-x-2 items-end my-4"),E(T,"class","table table-zebra w-full")},m(n,p){h&&h.m(n,p),j(n,e,p),j(n,l,p),o(l,t),o(t,a),o(t,r),o(t,c),o(c,$),o(l,_),o(l,k),o(k,u),o(k,A),o(k,w),o(w,C),j(n,U,p),j(n,x,p),o(x,O),ae(z,O,null),o(x,F),I&&I.m(x,null),j(n,G,p),j(n,T,p),o(T,S),o(T,W),o(T,q);for(let g=0;g<D.length;g+=1)D[g]&&D[g].m(q,null);m=!0},p(n,[p]){if(n[2]?h?(h.p(n,p),p&4&&J(h,1)):(h=pe(n),h.c(),J(h,1),h.m(e.parentNode,e)):h&&(xe(),K(h,1,1,()=>{h=null}),Se()),(!m||p&16)&&f!==(f=Y(n[4].dare)+"")&&P($,f),(!m||p&16)&&M!==(M=Y(n[4].avere)+"")&&P(C,M),n[5]&&n[5]._id?I?I.p(n,p):(I=ve(n),I.c(),I.m(x,null)):I&&(I.d(1),I=null),p&78){Q=ne(n[1]);let g;for(g=0;g<Q.length;g+=1){const X=_e(n,Q,g);D[g]?D[g].p(X,p):(D[g]=ge(X),D[g].c(),D[g].m(q,null))}for(;g<D.length;g+=1)D[g].d(1);D.length=Q.length}},i(n){m||(J(h),J(z.$$.fragment,n),m=!0)},o(n){K(h),K(z.$$.fragment,n),m=!1},d(n){n&&(i(e),i(l),i(U),i(x),i(G),i(T)),h&&h.d(n),re(z),I&&I.d(),ke(D,n)}}}function Y(s){return s||(s=0),Number(s).toLocaleString("it-IT",{style:"currency",currency:"EUR"})}function Me(s,e,l){let t;De(s,Ie,C=>l(6,t=C));let a=[],d=!1,r={},c={},f={dare:0,avere:0},$=null;Ve(async()=>{await _()});async function _(){c=await je($),l(1,a=c.spese),l(4,f=c.bilancio),console.log(a)}function k(C){r=C,l(3,r)}return[_,a,d,r,f,$,t,k,()=>{l(2,d=!1)},()=>{l(2,d=!1),_()},async C=>{l(5,$=C.detail),await _()},async()=>{l(5,$=null),await _()},C=>{l(3,r=C),l(2,d=!0)}]}class Ue extends ye{constructor(e){super(),Te(this,e,Me,He,$e,{reload:0})}get reload(){return this.$$.ctx[0]}}function Oe(s){let e,l,t,a,d,r=s[0].username+"",c,f,$,_,k;return l=new Ne({}),_=new Ue({}),{c(){e=v("div"),le(l.$$.fragment),t=B(),a=v("div"),d=L("Bilancio di @"),c=L(r),f=B(),$=v("div"),le(_.$$.fragment),this.h()},l(u){e=b(u,"DIV",{class:!0});var V=y(e);se(l.$$.fragment,V),t=N(V),a=b(V,"DIV",{class:!0});var A=y(a);d=R(A,"Bilancio di @"),c=R(A,r),A.forEach(i),V.forEach(i),f=N(u),$=b(u,"DIV",{class:!0});var w=y($);se(_.$$.fragment,w),w.forEach(i),this.h()},h(){E(a,"class","text-6xl font-bold "),E(e,"class","flex flex-col space-y-4 md:mx-24 mx-2 mt-4"),E($,"class","grid md:gap-0 grid-cols-1 items-center md:mx-24 mx-4 my-4")},m(u,V){j(u,e,V),ae(l,e,null),o(e,t),o(e,a),o(a,d),o(a,c),j(u,f,V),j(u,$,V),ae(_,$,null),k=!0},p(u,[V]){(!k||V&1)&&r!==(r=u[0].username+"")&&P(c,r)},i(u){k||(J(l.$$.fragment,u),J(_.$$.fragment,u),k=!0)},o(u){K(l.$$.fragment,u),K(_.$$.fragment,u),k=!1},d(u){u&&(i(e),i(f),i($)),re(l),re(_)}}}function Pe(s,e,l){let t;return De(s,Ie,a=>l(0,t=a)),[t]}class Ze extends ye{constructor(e){super(),Te(this,e,Pe,Oe,$e,{})}}export{Ze as component};
